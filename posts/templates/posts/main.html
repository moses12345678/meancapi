{% extends "base.html" %}
<!--jumbotron-->
{% block content %}
<!--jumbotron-->
{% load static %}
<!--jumbotron-->
{% load crispy_forms_tags %}
<script src="{% static 'posts/main.js' %}" defer></script>
<!--css static style-->
<link href="{% static 'assets/css/style.css'%}" rel="stylesheet" />
<!--jumbotron-->
{% if user.is_authenticated %}
<!--jumbotron-->

<div class="card-body">
  <!--<div class="text-left">
    <a type="button" class="btn btn-info" href="{% url 'logout' %}">Log Out</a>
  </div>
  <h4 class="text-center">List total des employers: {{count}}</h4>-->
  <div class="container-fluid py-4">
    <div class="row">
      <!--main.js for post ajax-->
      <!-- Modal 
          <div class="modal fade" id="addPostModal" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">-->
          <div class="modal fade" id="addPostModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">  
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Create content</h5>
                  <button type="button" class="close add-modal-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form id="post-form">
                    {% csrf_token %}
                    {{form|crispy}}
                    <div class="modal-footer">
                      <button type="button" class="btn btn-danger add-modal-close" data-dismiss="modal">close</button>
                      <button type="submit" id="add-btn" class="btn btn-success">+ add</button>
                    </div>
                  </form>
                  <form action="upload/" id="my-dropzone" class="dropzone dz not-visible">
                    {% csrf_token %}
                    <div class="fallback">
                      <input name="file" type="file" multiple />
                    </div>
                  </form>
                </div>

              </div>
            </div>
          </div>
       <div id="alert-box"></div>   
      <!-- End Modal -->
      <div class="text-left mb-3">
        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#addPostModal">
          <i class="fas fa-video"></i>
          <i class="fa fa-plus" aria-hidden="true"></i>
        </button>
      </div>
      <hr>
      <!--display content over here-->
      <div id="posts" class="card-columns"></div>
      <hr>
       <!-- End display contant oer here-->
      <div id="spinner-box" class="text-center">
        <div class="spinner-grow" style="width: 3rem; height: 3rem;" role="status"></div>
      </div>
      <br>
      <br>
      <div class="text-center mb-3" id="end-box">
        <button class="btn btn-primary" id="load-btn">Load More... <i class="fas fa-stroopwafel fa-spin"></i></button>
      </div>
    </div>
      <!--end main.js for ajax -->
    </div>
  </div>
</div>
<!-- begin else for login-->
{% else %}
<p>You are not logged in</p>
<a class="btn btn-outline-primary" href="{% url 'login' %}">SignIn</a>
{% endif %}
<!-- end else for login-->
{% endblock %}
